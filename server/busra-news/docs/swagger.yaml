basePath: /api
definitions:
  controllers.AdminUpdateUserRequest:
    properties:
      newPassword:
        example: admin123456
        type: string
      role:
        example: ADMIN
        type: string
      targetUserId:
        example: 65b1a5e2...
        type: string
      verified:
        example: true
        type: boolean
    required:
    - targetUserId
    type: object
  controllers.ChangePasswordRequest:
    properties:
      currentPassword:
        type: string
      newPassword:
        minLength: 6
        type: string
      retypePassword:
        type: string
    required:
    - currentPassword
    - newPassword
    - retypePassword
    type: object
  controllers.LoginRequest:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: "123456"
        type: string
    required:
    - email
    - password
    type: object
  controllers.ResendOTPRequest:
    properties:
      email:
        example: user@example.com
        type: string
    required:
    - email
    type: object
  controllers.ResetPasswordRequest:
    properties:
      email:
        example: user@example.com
        type: string
      newPassword:
        example: newpassword123
        minLength: 6
        type: string
      otp:
        example: "1234"
        type: string
    required:
    - email
    - newPassword
    - otp
    type: object
  controllers.UpdateUserRequest:
    properties:
      name:
        example: Sakib Khan
        type: string
    required:
    - name
    type: object
  controllers.VerifyOTPRequest:
    properties:
      email:
        example: user@example.com
        type: string
      otp:
        example: "1234"
        type: string
    required:
    - email
    - otp
    type: object
host: news-with-go.onrender.com
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: This is a sample news server for Busra News.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Busra News API
  version: "1.0"
paths:
  /auth/admin/delete-user/{id}:
    delete:
      description: Soft delete a user account by ID (Admin or Self)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Deactivate user account
      tags:
      - Admin
  /auth/admin/update-user:
    patch:
      consumes:
      - application/json
      description: Admin can change any user's role, verification status, or password
      parameters:
      - description: Admin Update Data
        in: body
        name: adminUpdate
        required: true
        schema:
          $ref: '#/definitions/controllers.AdminUpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Admin update user details
      tags:
      - Admin
  /auth/admin/users:
    get:
      description: Retrieve a paginated list of all non-deleted users
      parameters:
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: limit
        type: integer
      - description: Search by name or email
        in: query
        name: search
        type: string
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get all users (Admin Only)
      tags:
      - Admin
  /auth/change-password:
    post:
      consumes:
      - application/json
      description: Set a new password using the current password
      parameters:
      - description: Change Password Data
        in: body
        name: change
        required: true
        schema:
          $ref: '#/definitions/controllers.ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Change password (while logged in)
      tags:
      - Users
  /auth/forgot-password:
    post:
      consumes:
      - application/json
      description: Sends an OTP to the email for password reset
      parameters:
      - description: User Email
        in: body
        name: forgot
        required: true
        schema:
          $ref: '#/definitions/controllers.ResendOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Reset password
      tags:
      - Auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login with email and password to obtain Access and Refresh tokens
      parameters:
      - description: Login Credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/controllers.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: user login
      tags:
      - Auth
  /auth/me:
    get:
      description: Retrieve profile details of the logged-in user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - Users
  /auth/refresh-token:
    post:
      description: Obtain a new access token using a refresh token
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Refresh access token
      tags:
      - Auth
  /auth/resend-otp:
    post:
      consumes:
      - application/json
      description: Sends a new OTP for accounts that have not completed verification
      parameters:
      - description: User Email
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/controllers.ResendOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Resend OTP
      tags:
      - Auth
  /auth/reset-password:
    post:
      consumes:
      - application/json
      description: Verify OTP and set a new password
      parameters:
      - description: Reset Data
        in: body
        name: reset
        required: true
        schema:
          $ref: '#/definitions/controllers.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Reset password using OTP
      tags:
      - Auth
  /auth/update-profile:
    patch:
      consumes:
      - application/json
      description: Users can update their own name
      parameters:
      - description: Update Name
        in: body
        name: update
        required: true
        schema:
          $ref: '#/definitions/controllers.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update user name
      tags:
      - Users
  /auth/verify:
    post:
      consumes:
      - application/json
      description: Activate account using OTP sent to email
      parameters:
      - description: Verification Data
        in: body
        name: verify
        required: true
        schema:
          $ref: '#/definitions/controllers.VerifyOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Verify account
      tags:
      - Auth
  /comments/{id}:
    delete:
      description: Comments are soft deleted. Only the author of the comment or an
        admin can delete it.
      parameters:
      - description: Comment ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: delete a comment (soft delete)
      tags:
      - Comments
  /comments/create:
    post:
      consumes:
      - application/json
      description: Add a new comment to a news post or reply under another comment.
        For replies, the parent_id must be provided.
      parameters:
      - description: Comment Input (post_id, content, parent_id)
        in: body
        name: comment
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: create a new comment or reply
      tags:
      - Comments
  /comments/post/{id}:
    get:
      description: Fetch all comments for a specific post along with their nested
        replies, structured hierarchically.
      parameters:
      - description: Post ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
      summary: get comments and replies for a post
      tags:
      - Comments
  /comments/update/{id}:
    put:
      consumes:
      - application/json
      description: Logged-in users can only modify the content of their own comments.
      parameters:
      - description: Comment ID
        in: path
        name: id
        required: true
        type: string
      - description: Updated Content
        in: body
        name: content
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: edit a comment
      tags:
      - Comments
  /posts:
    get:
      description: 'Publicly view all active (is_deleted: false) posts with pagination
        support.'
      parameters:
      - description: 'Page number (Default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (Default: 10)'
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Get all active posts with pagination
      tags:
      - Posts
  /posts/{id}:
    delete:
      description: Instead of permanently deleting the post from the database, the
        'is_deleted' status is set to true.
      parameters:
      - description: Post ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Delete a post (soft delete)
      tags:
      - Posts
  /posts/{slug}:
    get:
      description: Read detailed news using the post's unique slug. Each visit increments
        the Read Count by 1.
      parameters:
      - description: Post Slug
        in: path
        name: slug
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
      summary: get a post by slug
      tags:
      - Posts
  /posts/create:
    post:
      consumes:
      - application/json
      description: Logged-in users (Writer/Admin) can create a new news post. Depending
        on the status, it can be published directly, saved as a draft, or scheduled.
      parameters:
      - description: Post Input (title, description, status, tags, etc.)
        in: body
        name: post
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: For creating a new post
      tags:
      - Posts
  /posts/status/{id}:
    patch:
      consumes:
      - application/json
      description: Change the post status (publish, schedule, draft). Providing a
        schedule time is mandatory when scheduling.
      parameters:
      - description: Post ID
        in: path
        name: id
        required: true
        type: string
      - description: New status and schedule time
        in: body
        name: status
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: change post status
      tags:
      - Posts
  /posts/update/{id}:
    put:
      consumes:
      - application/json
      description: The author of the post or an admin can modify the details of an
        existing post.
      parameters:
      - description: Post ID
        in: path
        name: id
        required: true
        type: string
      - description: Updated fields
        in: body
        name: post
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Upgrade an existing post
      tags:
      - Posts
securityDefinitions:
  BearerAuth:
    description: Type 'Bearer ' followed by your JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
